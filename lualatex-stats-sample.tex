\documentclass{article}
\usepackage{luacode}
\usepackage{tikz}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}
\usepackage{ucharcat}
\edef\percent{\Uchar`\% 12}

\newcommand{\df}{5}

\pagestyle{empty}
\begin{document}

\begin{luacode}
  stats = require("stats")
  local result = stats.dChisq(1.0,1)
  --  tex.print(result)
\end{luacode}

\begin{itemize}
\item 
  The value of the probability density function of the chi-square distribution at at $w=1.0$ and df$=\df$ is \directlua{tex.print(string.format("\percent.5f",stats.dChisq(1.0,\df)))}, more precisely, \directlua{tex.print(stats.dChisq(1.0,\df))}.
  \begin{itemize}
  \item scipy.stats.chi2(df=\df).pdf(1.0) gives $0.0806569081730478$.
  \end{itemize}
\item
  The value of the cumurative distribution function of the chi-square distribution at at $w=1.0$ and df$=\df$ is \directlua{tex.print(stats.pChisq(1.0,\df))}.
  \begin{itemize}
  \item scipy.stats.chi2(df=\df).cdf(1.0) gives $0.03743422675270361$.
  \end{itemize}
\item
  The quantile at $p=0.5$ of the chi-square distribution with df$=\df$ is \directlua{tex.print(stats.qChisq(0.5,\df))}.
  \begin{itemize}
  \item scipy.stats.chi2(df=\df).ppf(0.5) gives $4.351460191095526$.
  \end{itemize}
\item
  The value the probability density function of the chi-square distribution at $w=-1.0$ at df$=\df$ is \directlua{tex.print(stats.dChisq(-1.0,\df))}.
  \begin{itemize}
  \item scipy.stats.chi2(df=\df).pdf(-1.0) gives $0.0$.
  \end{itemize}
\item
  The value of the cumurative distribution function of the chi-square distribution at at $w=-1.0$ and df$=\df$ is \directlua{tex.print(stats.pChisq(-1.0,\df))}.
  \begin{itemize}
  \item scipy.stats.chi2(df=\df)cdf(-1.0) gives $0.0$.
  \end{itemize}
\item
The quantile at $p=-1.0$ of the chi-square distribution with df$=\df$, using \texttt{tex.print(stats.qChisq(-1.0,\df))}, results in ``Target Area must be $>$ 0'' \LaTeX\ compile error.
\begin{itemize}
\item scipy.stats.chi2(df=\df).ppf(-1.0) gives nan.
\end{itemize}
\end{itemize}


Plots with draw-tikzpicture

\begin{tikzpicture} [xscale = 1, yscale = 1]
  \draw [thick, -stealth](-2,0)--(5,0) node [anchor=north]{$w$};
  \draw [thick, -stealth](0,-0.1)--(0,2) node [anchor=east]{$f$};
  \node [anchor=north west] at (0,0) {O};

  \draw [ domain=0.1:5, samples=200, color=orange] plot(\x, \directlua{tex.print(stats.dChisq(\x, 1))});  % diverges at w=0. User must take care.

  \draw [ domain=0:5, samples=200, color=red] plot(\x, \directlua{tex.print(stats.dChisq(\x, 3))});  % error for negative w.

  \draw [ domain=0:5, samples=200, color=magenta] plot(\x, \directlua{tex.print(stats.dChisq(\x, 5))});  % error for negative w.

  \draw[orange, thick] (3.5,1.5) -- ++(0.5,0) node[right] {df=1};
  \draw[red, thick] (3.5,1) -- ++(0.5,0) node[right] {df=3};
  \draw[magenta, thick] (3.5,0.5) -- ++(0.5,0) node[right] {df=5};  
  
  % ticks
  \node [anchor=north] at (1,0){$1$};
  \node [anchor=north] at (2,0){$2$};  
  \node [anchor=north] at (-1,0){$-1$};           
\end{tikzpicture}

Plots with addplot-axis-tikzpicture do not work.

\begin{tikzpicture}[ 
  declare function={
    cdf0(\x)=\directlua{tex.print(stats.dChisq(\x, 3))});
    cdf1(\x)= or(\x < 0) * (0)   +
            and(\x >= 0) * (1-exp(-\x)); 
  }
  ]
  \begin{axis}[
    width=10cm,
    height=6cm,
    xlabel={$x$},
    ylabel={$p$},
    axis lines=middle,
    domain=-2:7,
    samples=100,
    xmin=-2, xmax=7,
    ymin=-0.1, ymax=1.1,
    legend pos=south east,
    legend style={
      at={(1,0)},
      anchor=south west,
      draw=none
    }
    ]
    \addplot[thick,blue, domain=-2:7]  {cdf1(x)}; 
    \addlegendentry{plot without stats.lua}
    % \addplot[thick,blue, domain=0:7]  {cdf0(x)}; % does not work
    % \addplot[thick,blue, domain=0:7]{\directlua{tex.print(stats.dChisq(x, 3))})}; % does not work
  \end{axis}
\end{tikzpicture}      


\end{document}